<!DOCTYPE html>
<html lang="en">
<head>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width">
<title>Annotations viewer</title>
<link rel="stylesheet" href="style.css">
<body>
<section id="wrapper">
    <header>
      <h1>DÃ©poser le fichier d'annotation...</h1>
    </header>
<style>
#holder { border: 10px dashed #ccc; width: 90%; height: 500px; margin: 20px auto;}
#holder.hover { border: 10px dashed #333; }
</style>
<article>
  <div id="holder"></div> 
</article>
<script>
var holder = document.getElementById('holder'),
    state = document.getElementById('status');
 
holder.ondragover = function () { this.className = 'hover'; return false; };
holder.ondragend = function () { this.className = ''; return false; };
holder.ondrop = function (e) {
  this.className = '';
  e.preventDefault();

  var file = e.dataTransfer.files[0],
      reader = new FileReader();
  reader.onload = function (event) {
    console.log(event.target);
    let contentBody = event.target.result;
    console.log("contentBody",contentBody);
    let regex = /<text>(.*?)<\/text>/g;
    let match;
    const annotations = [];
    while ( (match = regex.exec(contentBody)) !== null) {
      console.log("match",match);
      annotations.push(match[1]);
    }
    
    holder.innerHTML = annotations.map(a=>`<p>${a}</p>`).join('');
  };
  console.log(file);
  reader.readAsText(file);

  return false;
};
</script>
</section>
</body>
</html>